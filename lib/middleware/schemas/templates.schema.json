{
  "$schema": "http://json-schema.org/draft-07/schema",
  "id": "https://forms-formulaires.alpha.canada.ca/",
  "type": "object",
  "title": "GC Forms Schema - Alpha",
  "description": "A schema to define a Forms configuration.",
  "default": {},
  "examples": [],
  "properties": {
    "securityAttribute": {
      "description": "It shows an administrator what proceduce should be taken when accessing a form's responses",
      "$id": "#/properties/securityAttribute",
      "type": "string",
      "enum": ["Protected A", "Protected B", "Unclassified"]
    },
    "internalTitleEn": {
      "description": "The internal title of the form in English",
      "$id": "#/properties/internalTitleEn",
      "type": "string"
    },
    "internalTitleFr": {
      "description": "The internal title of the form in French",
      "$id": "#/properties/internalTitleFr",
      "type": "string"
    },
    "publishingStatus": {
      "description": "If set to false, the link to the form will not appear on the main page, rather under 'sandbox'",
      "$id": "#/properties/publishingStatus",
      "type": "boolean"
    },
    "form": {
      "version": {
        "description": "The version number of the form.",
        "type": "number",
        "mimimum": 0
      },
      "layout": {
        "description": "A list of element IDs that determines the order or elements in the form.",
        "type": "array",
        "items": {
          "$ref": "#/$defs/element/properties/id"
        }
      },
      "type": "object",
      "properties": {
        "elements": {
          "description": "A list of elements contained within the form.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/element"
          }
        },
        "titleEn": {
          "description": "The displayed title of the form to the user in English",
          "$id": "#/properties/titleEn",
          "type": "string"
        },
        "titleFr": {
          "description": "The displayed title of the form to the user in French",
          "$id": "#/properties/titleFr",
          "type": "string"
        },
        "brand": {
          "type": "object",
          "properties": {
            "name": {
              "description": "The brand name.",
              "type": "string"
            },
            "urlEn": {
              "description": "Url for english version of the site.",
              "type": "string"
            },
            "urlFr": {
              "description": "url for a french version of the site.",
              "type": "string"
            },
            "logoEn": {
              "description": "English logo path.",
              "type": "string"
            },
            "logoFr": {
              "description": "French logo path.",
              "type": "string"
            },
            "logoTitleEn": {
              "description": "logo title.",
              "type": "string"
            },
            "logoTitleFr": {
              "description": "logo title.",
              "type": "string"
            },
            "disableGCBranding": {
              "description": "If set to true, GC branding will not be rendered in the footer.",
              "type": "boolean"
            }
          }
        },
        "emailSubjectEn": {
          "description": "The email subject used in the Notify template in English.",
          "$id": "#/properties/emailSubjectEn",
          "type": "string"
        },
        "emailSubjectFr": {
          "description": "The email subject used in the Notify template in French.",
          "$id": "#/properties/emailSubjectFr",
          "type": "string"
        }        
      },
      "required": ["elements", "titleEn", "titleFr"]
    },
    "submission": {
      "type": "object",
      "properties": {
        "email": {
          "description": "The email address to which the form submission should be sent.",
          "type": "string",
          "pattern": "^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.([a-zA-Z0-9-]{2,}))+$"
        },
        "vault": {
          "description": "If set to true, the form submission will be saved in the vault.",
          "type": "boolean"
        }
      }
    }
  },
  "required": ["form", "submission", "publishingStatus"],
  "additionalProperties": true,

  "$defs": {
    "element": {
      "type": "object",
      "properties": {
        "id": {
          "description": "The unique id for the object",
          "type": "integer",
          "minimum": 1
        },
        "type": {
          "type": "string",
          "enum": [
            "textField",
            "textArea",
            "dropdown",
            "radio",
            "checkbox",
            "fileInput",
            "dynamicRow",
            "richText"
          ]
        }
      },
      "required": ["id", "type", "properties"]
    },
    "elementProperties": {
      "type": "object",
      "properties": {
        "titleEN": {
          "description": "Input label in English",
          "type": "string"
        },
        "titleFR": {
          "description": "Input label in French",
          "type": "string"
        },
        "placeholderEn": {
          "description": "Text that will appear in the text input field as a placeholder in English",
          "type": "string"
        },
        "placeholderFr": {
          "description": "Text that will appear in the text input field as a placeholder in French",
          "type": "string"
        },
        "descriptionEn": {
          "description": "Secondary paragraph/text of a question or element that provides additional context beyond the label in English",
          "type": "string"
        },
        "descriptionFr": {
          "description": "Secondary paragraph/text of a question or element that provides additional context beyond the label in French",
          "type": "string"
        },
        "maxNumberOfRows": {
          "type": "integer",
          "minimum": 1
        },
        "validation": {
          "type": "#/$defs/validation"
        }
      }
    },
    "validation": {
      "type": "object",
      "properties": {
        "required": {
          "type": "boolean"
        },
        "type": {
          "type": "string",
          "enum": ["email", "alphanumeric", "text", "name", "number", "phone", "date"]
        },
        "regex": {
          "type": "string"
        },
        "maxLegth": {
          "description": "The maximum number of characters that can be entered in a textinput or textarea.",
          "type": "integer",
          "minimum": 1
        },
        "descriptionEN": {
          "type": "string"
        },
        "descriptionFR": {
          "type": "string"
        },
        "all": {
          "description": "Used only for checkboxes, ignored on other elements. When set to true, this will require that all checkboxes be selected. Used typically for the attestation section.",
          "type": "boolean"
        }
      }
    }
  }
}
