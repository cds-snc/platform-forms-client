@config "../tailwind.forms.config.js";

@import "forms/buttons";
@import "forms/inputs";
@import "forms/layout";
@import "forms/states";
@import "forms/typography";

// IE polyfills
@supports not (display: grid) {
  input {
    border: 1px solid #000;
  }
}

// Partial: Layout

.gc-item-row {
  @apply border-t-2 pt-16 pb-3 px-0 bg-white-default mt-0 border-black-form;

  // Where are the h3 in rows?
  // h3 {
  //   @apply md:text-small_h3 font-bold text-h3 pb-0 mb-10;
  // }
}

// why size h2?
.gc-section-header {
  @apply md:text-small_h2 font-bold text-h2 mb-16 mt-12 p-6 bg-gray-background;
}

// Still relevant?
// .page-preview-form,
// .page-en-preview-form,
// .page-fr-preview-form {
//   h1::before {
//     content: "[Preview/PrÃ©visualisation]";
//     @apply mb-10 block font-bold text-green-700;
//   }
//   .gc-button[type="submit"] {
//     display: none;
//   }
// }

// .validation-message {
//   @apply text-red-500;
// }

// What is this?
.gc-form-confirmation {
  p {
    @apply text-base md:text-small_p;
  }
}

.confirmation-content {
  @apply relative;
}

.confirmation-list {
  @apply list-inside mb-10;
}

.gc-confirmation-banner {
  @apply bg-gray-200 py-16 px-20 mb-10 w-5/6 xl:w-full md:py-10 md:px-10;

  h2 {
    @apply text-h2 mb-6 md:text-small_h2;
  }

  p:first-of-type {
    @apply mb-5 md:text-small_p;
  }

  p:last-of-type {
    @apply font-bold md:text-small_p;
  }
}

// Belongs here?
.gc-last-logout-time {
  @apply text-sm not-italic font-sans items-center font-normal pb-10 pt-3;
  line-height: 125%;
}

.gc-go-to-login-btn {
  a {
    @apply bg-blue-500 hover:bg-blue-700 text-white-default font-bold py-2 px-4 rounded;
    text-decoration: none !important;
    background-color: #26374a;
  }
}

// Partial: Form / inputs

.gc-form {
  @apply max-w-prose;
}

.gc-form-group {
  @apply mb-0;

  // This receives focus. Need to create styles.

  .gc-input-radio:last-of-type,
  .gc-input-checkbox:last-of-type {
    @apply pb-0;
  }
}

.gc-form-group-context {
  @include visuallyHidden();
}

// .gc-legend {
//   @apply md:text-small_h2 text-h2 mb-14 font-bold;
// }

.gc-label {
  @apply md:text-small_base block mb-2 text-base w-3/4 xl:w-full;
  // &.required > span {
  //   @apply text-red-700;
  //   // content: " *";
  // }
}

// What is the purpose? Is this just a p tag?
// .gc-plain-text {
//   @apply w-full my-5;
// }

.focus-group {
  @apply mb-14;
}

.focus-group:focus-within {
  .gc-label,
  .gc-description {
    @apply text-blue-focus;
  }
}

// common text box styles
.gc-textarea,
.gc-input-text,
.gc-dropdown {
  border-radius: var(--gcds-input-border-radius);
  @apply py-3 px-2 mt-2 md:text-small_base text-base border-solid border-2 border-black-form;

  &:focus {
    @apply outline-blue-focus outline outline-offset-2 outline-[3px] border-blue-focus;
  }
}

.gc-textarea {
  @apply w-full md:w-3/4 max-w-prose h-40;
  &.full-height {
    @apply h-auto;
  }
}

.gc-input-text {
  @apply w-full max-w-[40ch];
}

.gc-dropdown {
  background-image: url("../public/img/arrow-down.svg");
  @apply w-full max-w-[40ch] pr-10 appearance-none bg-white bg-no-repeat bg-center-right-15px;
}

// common fieldset options styles
.gc-input-radio,
.gc-input-checkbox {
  @apply flex pt-3 pb-1 px-0 items-center;
}

.gc-radio-label,
.gc-checkbox-label {
  @apply md:text-small_base font-normal text-base inline-flex items-center;
}

.gc-input-checkbox {
  @apply block;

  .gc-input-checkbox__input {
    background-repeat: round;
    @apply md:mr-4 mr-6 absolute w-10 h-10 bg-white-default border-2 border-transparent;
    & + .gc-checkbox-label {
      @apply relative cursor-pointer p-0;
    }

    &:focus {
      @apply outline-none;
    }

    &:focus + .gc-checkbox-label {
      span {
        @apply text-blue-focus;
      }
    }

    &:focus + .gc-checkbox-label:before {
      @apply outline-blue-focus outline outline-offset-2 outline-[3px] border-blue-focus;
    }

    // Box.
    & + .gc-checkbox-label:before {
      content: "";
      border-radius: var(--gcds-input-border-radius);
      @apply md:mr-3 mr-3 inline-block w-10 h-10 bg-white-default border-2 border-black-form;
    }

    // Checkmark. Could be replaced with an image
    &:checked + .gc-checkbox-label:after {
      background-repeat: no-repeat;
      content: "";
      background-image: url("../public/img/checkmark.svg");
      @apply absolute w-6 h-6 left-2;
    }

    &:focus + .gc-checkbox-label:after {
      background-image: url("../public/img/blue-checkmark.svg");
    }
  }
}

.gc-input-radio {
  .gc-radio__input {
    @apply md:mr-4 mr-6 absolute w-10 h-10 bg-white-default border-transparent;
    & + .gc-radio-label {
      @apply relative cursor-pointer p-0;
    }

    &:focus {
      @apply outline-none;
    }

    &:focus + .gc-radio-label {
      span {
        @apply text-blue-focus;
      }
    }

    &:focus + .gc-radio-label:before {
      @apply outline-blue-focus outline outline-offset-2 outline-[3px] border-blue-focus;
    }

    // Circle.
    & + .gc-radio-label:before {
      content: "";
      @apply md:mr-2 mr-2 inline-block w-10 h-10 bg-white-default border-2 border-black-form rounded-full;
    }

    // Radio. Could be replaced with an image
    &:checked + .gc-radio-label:after {
      content: "";
      background-image: url("../public/img/black-circle.svg");
      @apply absolute w-5 h-5 left-10px;
    }

    &:focus + .gc-radio-label:after {
      background-image: url("../public/img/blue-circle.svg");
    }
  }
}

.gc-file-input {
  @apply w-full md:text-small_base text-base py-3 pr-2 mt-2 mb-14;

  &:focus {
    @apply outline-none border-blue-focus shadow-input;
  }

  &.is-disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  .gc-file-input-upload-button {
    @apply text-center inline-block mb-0;
  }

  .gc-file-input-file-selected {
    @apply inline-block;
  }

  [type="file"] {
    display: none;
  }
}
